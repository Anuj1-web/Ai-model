<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Home - Sitegen</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="https://www.favicon.cc/logo3d/147380.png">
  <style>
    body { background: #fff; color: #000; }
    .card { cursor: pointer; transition: transform 0.2s ease; }
    .card:hover { transform: scale(1.02); }
  </style>
</head>
<body class="p-6">

  <!-- Header -->
<div class="flex justify-between items-center mb-6">
  <!-- Left side -->
  <h1 class="text-3xl font-bold">Sitegen</h1>

  <!-- Right side -->
  <div class="flex space-x-4 mr-8">
    <a href="dashboard.html" 
       class="px-4 py-2 bg-black text-white rounded-lg shadow hover:opacity-80">
      Dashboard
    </a>
    <a href="signup.html" 
       class="px-4 py-2 bg-black text-white rounded-lg shadow hover:opacity-80">
      Signup
    </a>
    <a href="login.html" 
       class="px-4 py-2 bg-black text-white rounded-lg shadow hover:opacity-80">
      Login
    </a>
  </div>
</div>

  <!-- Templates Grid -->
  <div id="libraryGrid" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>

  <script>
    // Load templates from localStorage (set in library.html)
    let library = JSON.parse(localStorage.getItem("sitegenLibrary") || "[]");
    const libraryGrid = document.getElementById("libraryGrid");

    // Save chosen template and open wizard
    function openInWizard(zipBlob) {
      const reader = new FileReader();
      reader.onload = () => {
        localStorage.setItem("wizardTemplate", reader.result); // base64 string
        window.location.href = "wizardmaker.html"; // no long query params
      };
      reader.readAsDataURL(zipBlob);
    }

    // Render template cards
    function renderTemplates() {
      libraryGrid.innerHTML = "";
      library.forEach((item) => {
        if (item.type === "template") {
          const card = document.createElement("div");
          card.className = "card border rounded shadow overflow-hidden";

          const img = document.createElement("img");
          img.src = item.thumbnail || "https://via.placeholder.com/400x200?text=No+Thumbnail";
          img.className = "w-full h-48 object-cover";
          card.appendChild(img);

          // Open in wizard on click
          card.onclick = async () => {
            const response = await fetch(item.content); // item.content is base64 zip
            const blob = await response.blob();
            openInWizard(blob);
          };

          libraryGrid.appendChild(card);
        }
      });
    }

    renderTemplates();
  </script>

</body>
</html>
