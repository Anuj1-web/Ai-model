<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wizard Maker â€” Button Fix (v11 UI + Placeholder)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f0f2f5;
      display: flex;
      justify-content: center;
    }
    .card {
      background: #fff;
      border-radius: 1rem;
      padding: 1.5rem 2rem;
      box-shadow: 0 4px 14px rgba(0,0,0,0.1);
      max-width: 1100px;
      width: 100%;
    }
    h1 {
      font-size: 1.5rem;
      margin-bottom: .25rem;
    }
    p {
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 1rem;
    }
    .topbar {
      display: flex;
      gap: .5rem;
      align-items: center;
      margin-bottom: 1rem;
    }
    input[type="file"] {
      padding: .4rem;
      border: 1px solid #ccc;
      border-radius: .5rem;
    }
    button {
      padding: .5rem .9rem;
      border: none;
      border-radius: .5rem;
      background: #111; /* BLACK EXPORT BUTTON */
      color: #fff;
      cursor: pointer;
      font-size: 0.9rem;
    }
    button:hover {
      background: #333;
    }
    .tabs {
      display: flex;
      gap: .5rem;
      flex-wrap: wrap;
      margin: 1rem 0;
    }
    .tab {
      padding: .25rem .75rem;
      border: 1px solid #ccc;
      border-radius: .5rem;
      background: #f3f4f6;
      cursor: pointer;
      font-size: 0.85rem;
    }
    .tab.active {
      background: #e5e7eb;
      font-weight: bold;
    }
    iframe {
      width: 100%;
      height: 600px;
      border: 1px solid #ccc;
      border-radius: .5rem;
      background: #fff;
    }
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.4);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
    }
    .modal {
      background: #fff;
      padding: 1.5rem;
      border-radius: 1rem;
      max-width: 420px;
      width: 100%;
      box-shadow: 0 6px 20px rgba(0,0,0,.25);
    }
    .modal h2 {
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }
    .mb-2 { margin-bottom: .5rem; }
    .mb-3 { margin-bottom: .75rem; }
    .mb-4 { margin-bottom: 1rem; }
    input, select {
      padding: .5rem;
      border: 1px solid #ccc;
      border-radius: .5rem;
      width: 100%;
      font-size: .9rem;
    }
    .actions {
      display: flex;
      justify-content: flex-end;
      gap: .5rem;
    }
    .actions button {
      flex: 0 0 auto;
    }
    #cancelBtn {
      background: #e5e7eb;
      color: #111;
    }
    #cancelBtn:hover {
      background: #d1d5db;
    }
 /* Wizard Maker Library Sidebar */
#librarySidebar {
  position: fixed;
  right: 0;
  top: 0;
  height: 100vh;
  width: 280px;
  background: #f9fafb;
  border-left: 1px solid #ccc;
  padding: 1rem;
  overflow-y: auto;
  box-shadow: -4px 0 12px rgba(0,0,0,0.05);
  z-index: 100;
  display: flex;
  flex-direction: column;
  gap: 1rem;
  font-size: 0.85rem;
}

#librarySidebar h3 {
  margin: 0 0 0.5rem 0;
  font-size: 0.95rem;
  font-weight: bold;
}

.library-category {
  margin-bottom: 1rem;
}

.library-item {
  padding: 0.35rem 0.5rem;
  border: 1px solid #ddd;
  border-radius: 0.4rem;
  margin-bottom: 0.35rem;
  cursor: grab;
  background: #fff;
}

.library-item:hover {
  background: #e5e7eb;
}

.library-item.dragging {
  opacity: 0.6;
}

#pageNavContainer {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 0.5rem;
  background: rgba(255,255,255,0.95);
  padding: 0.5rem 1rem;
  border-radius: 0.5rem 0.5rem 0 0;
  box-shadow: 0 -2px 6px rgba(0,0,0,0.1);
  z-index: 90;
}

#pageNavContainer button {
  padding: 0.4rem 0.7rem;
  border-radius: 0.4rem;
  border: 1px solid #ccc;
  background: #f3f4f6;
  cursor: pointer;
  font-size: 0.85rem;
}

#pageNavContainer button.active {
  font-weight: bold;
  background: #e5e7eb;
}
  </style>
</head>
<body>
  <div class="card">
    <h1>Wizard Maker â€” Button Fix (v11)</h1>
    <p>Upload EduPro (multi-page). Double-click or double-tap buttons/links/inputs to edit. Cancel fully restores. Fonts untouched.</p>

    <div class="topbar">
      <input type="file" id="zipInput" accept=".zip">
      <button id="exportBtn">â¬‡ Export ZIP</button>
    </div>

    <div class="tabs" id="tabs"></div>
    <div id="iframeContainer"></div>
  </div>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" style="display:none;">
    <div class="modal">
      <h2>Edit Element</h2>
      <div id="textSection" class="mb-4">
        <label class="mb-2">Text / Placeholder</label>
        <input id="modalText">
      </div>
      <div class="mb-3">
        <label class="mb-2">Color Mode</label>
        <select id="colorTarget">
          <option value="auto">Auto</option>
          <option value="text">Text Color</option>
          <option value="background">Background</option>
        </select>
      </div>
      <div class="mb-4">
        <label class="mb-2">Color Picker</label>
        <input type="color" id="modalColor" style="width:70px;">
      </div>
      <div class="mb-4">
        <label class="mb-2">Replace Image</label>
        <input type="url" id="imageUrl" placeholder="Image URL">
        <input type="file" id="imageFile" accept="image/*">
      </div>
      <div class="actions">
        <button id="cancelBtn">Cancel</button>
        <button id="saveBtn">Save</button>
      </div>
    </div>
  </div>

  <script>
    const zipInput = document.getElementById("zipInput");
    const exportBtn = document.getElementById("exportBtn");
    const tabsEl = document.getElementById("tabs");
    const iframeContainer = document.getElementById("iframeContainer");

    const modalBackdrop = document.getElementById("modalBackdrop");
    const modalText = document.getElementById("modalText");
    const modalColor = document.getElementById("modalColor");
    const colorTargetSel = document.getElementById("colorTarget");
    const imageUrl = document.getElementById("imageUrl");
    const imageFile = document.getElementById("imageFile");
    const cancelBtn = document.getElementById("cancelBtn");
    const saveBtn = document.getElementById("saveBtn");

    let pages = [];
    let pageContents = {};
    let editedContents = {};
    let otherFiles = {};
    let activePage = "";
    let iframeRefs = {};

    let modalTarget = { page: "", id: "", hasText: false, hasPlaceholder: false };
    let originalSnapshot = null;

    // --- File handling ---
    zipInput.addEventListener("change", async (e) => {
      const file = e.target.files?.[0];
      if (!file) return;
      const zip = await JSZip.loadAsync(file);
      const newPages = [];
      const newContents = {};
      const other = {};

      await Promise.all(Object.keys(zip.files).map(async (filename) => {
        const entry = zip.files[filename];
        if (entry.dir) return;
        if (filename.toLowerCase().endsWith(".html")) {
          const data = await entry.async("string");
          newPages.push(filename);
          newContents[filename] = data;
        } else {
          const data = await entry.async("uint8array");
          other[filename] = data;
        }
      }));

      newPages.sort((a,b) => {
        const ai = /(^|\/)index\.html$/i.test(a);
        const bi = /(^|\/)index\.html$/i.test(b);
        if (ai && !bi) return -1;
        if (!ai && bi) return 1;
        return a.localeCompare(b);
      });

      pages = newPages;
      pageContents = newContents;
      editedContents = {...newContents};
      otherFiles = other;
      activePage = newPages[0] || "";

      renderTabs();
      renderIframes();
    });

    function renderTabs() {
      tabsEl.innerHTML = "";
      pages.forEach((p) => {
        const tab = document.createElement("div");
        tab.className = "tab" + (p === activePage ? " active" : "");
        tab.textContent = p;
        tab.onclick = () => { activePage = p; renderTabs(); renderIframes(); };
        tabsEl.appendChild(tab);
      });
    }

    function injectEditingBridge(html, pageName) {
      const bridge = `<script>(function(){
        var EDIT_ATTR='data-edit-id';
        var clickTimers={};
        function ensureId(el){if(!el.getAttribute(EDIT_ATTR)) el.setAttribute(EDIT_ATTR,'e'+Math.random().toString(36).slice(2,9));return el.getAttribute(EDIT_ATTR);}
        function buildSnapshot(el){return {
          html: el.innerHTML || '',
          text: el.innerText || '',
          placeholder: ('placeholder' in el ? el.placeholder || undefined : undefined),
          src: (el.tagName==='IMG'?(el.getAttribute('src')||el.src||''):undefined),
          inline:{color:el.style.color,backgroundColor:el.style.backgroundColor}
        };}
        document.addEventListener('click',function(e){
          var el=e.target;if(!el)return;
          var tn=(el.tagName||'').toUpperCase();
          if(tn==='A'||tn==='BUTTON'||tn==='INPUT'||tn==='TEXTAREA'){
            var id=ensureId(el);
            e.preventDefault();e.stopPropagation();
            if(clickTimers[id]){
              clearTimeout(clickTimers[id]);clickTimers[id]=null;
              var snap=buildSnapshot(el);
              parent.postMessage({type:'OPEN_EDITOR',page:'${pageName}',id:id,
                hasText:!!el.innerText,
                hasPlaceholder:('placeholder' in el),
                ...snap},'*');
            }else{
              clickTimers[id]=setTimeout(function(){
                clickTimers[id]=null;
                var href=(el.tagName==='A'&&el.href)?el.href:null;
                if(href) window.location.href=href; else el.click();
              },300);
            }
          }
        },true);
        document.addEventListener('dblclick',function(e){
          var el=e.target;if(!el)return;
          e.preventDefault();e.stopPropagation();
          var id=ensureId(el);
          var snap=buildSnapshot(el);
          parent.postMessage({type:'OPEN_EDITOR',page:'${pageName}',id:id,
            hasText:!!el.innerText,
            hasPlaceholder:('placeholder' in el),
            ...snap},'*');
        },true);
        window.addEventListener('message',function(ev){
          var d=ev.data||{};
          var el=document.querySelector('['+EDIT_ATTR+'="'+d.id+'"]');
          if(!el)return;
          if(d.type==='APPLY_TEXT'){
            if('placeholder' in el) el.placeholder=d.text||''; else el.innerText=d.text||'';
          }
          if(d.type==='APPLY_COLOR'){if(d.target==='background')el.style.backgroundColor=d.color;else el.style.color=d.color;}
          if(d.type==='APPLY_IMAGE'&&el.tagName==='IMG')el.src=d.src;
          if(d.type==='RESTORE_ELEMENT'&&d.snapshot){
            if(d.snapshot.html!==undefined && !('placeholder' in el)) el.innerHTML=d.snapshot.html;
            if(d.snapshot.placeholder!==undefined && 'placeholder' in el) el.placeholder=d.snapshot.placeholder;
            if(d.snapshot.src!==undefined&&el.tagName==='IMG')el.src=d.snapshot.src;
            if(d.snapshot.inline){el.style.color=d.snapshot.inline.color||'';el.style.backgroundColor=d.snapshot.inline.backgroundColor||'';}
          }
        });
      })();<\/script>`;
      return html.replace(/<\/body>/i, bridge + "</body>");
    }

    function renderIframes() {
      iframeContainer.innerHTML = "";
      if (!activePage) return;
      const iframe = document.createElement("iframe");
      iframe.srcdoc = injectEditingBridge(editedContents[activePage] || pageContents[activePage] || "", activePage);
      iframeContainer.appendChild(iframe);
      iframeRefs[activePage] = iframe;
    }

    window.addEventListener("message", (event) => {
      const d = event.data || {};
      if (d.type === "OPEN_EDITOR") {
        modalTarget = { page: d.page, id: d.id, hasText: !!d.hasText, hasPlaceholder: !!d.hasPlaceholder };
        modalText.value = d.hasPlaceholder ? d.placeholder || "" : (d.text || "");
        modalColor.value = "#000000";
        originalSnapshot = d;
        modalBackdrop.style.display = "flex";
        document.getElementById("textSection").style.display = (d.hasText || d.hasPlaceholder) ? "block" : "none";
      }
    });

    modalText.addEventListener("input", () => {
      const {page,id} = modalTarget;
      iframeRefs[page].contentWindow.postMessage({type:"APPLY_TEXT",id,text:modalText.value},"*");
    });

    modalColor.addEventListener("input", () => {
      const {page,id,hasText} = modalTarget;
      const target = colorTargetSel.value==="auto" ? (hasText ? "color" : "background") : colorTargetSel.value;
      iframeRefs[page].contentWindow.postMessage({type:"APPLY_COLOR",id,color:modalColor.value,target},"*");
    });

    imageUrl.addEventListener("input", () => {
      const {page,id} = modalTarget;
      iframeRefs[page].contentWindow.postMessage({type:"APPLY_IMAGE",id,src:imageUrl.value},"*");
    });

    imageFile.addEventListener("change", (e) => {
      const file = e.target.files?.[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = () => {
        const {page,id} = modalTarget;
        iframeRefs[page].contentWindow.postMessage({type:"APPLY_IMAGE",id,src:reader.result},"*");
      };
      reader.readAsDataURL(file);
    });

    saveBtn.onclick = () => {
      const {page} = modalTarget;
      const iframe = iframeRefs[page];
      if (iframe.contentDocument) {
        const html = "<!DOCTYPE html>" + iframe.contentDocument.documentElement.outerHTML;
        editedContents[page] = html;
      }
      modalBackdrop.style.display = "none";
    };

    cancelBtn.onclick = () => {
      const {page,id} = modalTarget;
      const iframe = iframeRefs[page];
      if (iframe?.contentWindow && originalSnapshot) {
        iframe.contentWindow.postMessage({type:"RESTORE_ELEMENT",id,snapshot:originalSnapshot},"*");
      }
      modalBackdrop.style.display = "none";
    };

    exportBtn.addEventListener("click", async () => {
      const zip = new JSZip();
      pages.forEach((filename) => {
        const html = editedContents[filename] || pageContents[filename] || "";
        zip.file(filename, html);
      });
      Object.entries(otherFiles).forEach(([filename, data]) => {
        zip.file(filename, data);
      });
      const blob = await zip.generateAsync({type:"blob"});
      saveAs(blob, "custom-site.zip");
    });
  </script>
<script>
  function autoLoadTemplate() {
    const templateData = localStorage.getItem("wizardTemplate");
    if (!templateData) return;

    try {
      // Decode base64 zip string back into a Blob
      const binary = atob(templateData.split(',')[1]);
      const array = new Uint8Array(binary.length);
      for (let i = 0; i < binary.length; i++) {
        array[i] = binary.charCodeAt(i);
      }
      const blob = new Blob([array], { type: "application/zip" });
      const file = new File([blob], "template.zip", { type: "application/zip" });

      // Feed the file into zipInput
      const dataTransfer = new DataTransfer();
      dataTransfer.items.add(file);
      const zipInput = document.getElementById("zipInput");
      zipInput.files = dataTransfer.files;

      // Trigger the change event to load into editor
      zipInput.dispatchEvent(new Event("change", { bubbles: true }));

      // Clear storage so it doesnâ€™t auto-load next time accidentally
      localStorage.removeItem("wizardTemplate");
    } catch (err) {
      console.error("Template auto-load failed:", err);
    }
  }
   autoLoadTemplate();
</script>  <!-- âœ… properly close the previous script -->

<!-- ================== LIBRARY SIDEBAR FETCH FROM LIBRARY ================== -->

<!-- Floating black + button -->
<button id="openLibraryBtn" style="
  position: fixed; bottom: 20px; right: 20px;
  width: 50px; height: 50px; border-radius: 50%;
  background: #111; color: #fff; font-size: 2rem;
  border: none; cursor: pointer; z-index: 2000;">+</button>

<!-- Sidebar -->
<div id="librarySidebar" style="display:none;">
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
    <h3 style="margin:0;color:#fff;">Library Assets</h3>
    <button id="closeLibraryBtn" style="background:none;color:#fff;font-size:1.2rem;border:none;cursor:pointer;">âœ–</button>
  </div>

  <!-- Search -->
  <input type="text" id="librarySearch" placeholder="Search..."
         style="width:100%;padding:0.3rem;margin-bottom:0.5rem;border-radius:0.25rem;border:none;background:#333;color:#fff;">

  <!-- Container -->
  <div id="libraryContainer" style="overflow-y:auto; flex:1;"></div>

  <hr style="border-color:#444;margin:0.5rem 0;">

  <button id="addPageBtnSidebar"
          style="padding:0.4rem;background:#222;color:#fff;border:none;border-radius:0.25rem;cursor:pointer;">
    + Add Blank Page
  </button>
</div>

<style>
#librarySidebar {
  position: fixed;
  top: 0; right: 0;
  width: 320px; height: 100vh;
  background: #111; padding: 1rem;
  box-shadow: -4px 0 12px rgba(0,0,0,0.5);
  z-index: 1500;
  color: #fff;
  display: flex;
  flex-direction: column;
}
.library-category {
  font-weight: bold;
  margin-top: 1rem;
  color: #fff;
}
.library-subcategory {
  font-style: italic;
  font-size: 0.85rem;
  margin-bottom: 0.2rem;
  color: #ccc;
}
.library-item {
  padding: 0.5rem;
  margin-bottom: 0.6rem;
  border-radius: 0.3rem;
  background: #222;
  cursor: pointer;
  color: #fff;
  text-align: center;
}
.library-item:hover { background: #333; }
.library-thumb { max-height: 80px; overflow:hidden; margin-bottom:0.3rem; }
.library-thumb img { max-width: 100%; border-radius:4px; }
.library-title { font-size:0.8rem; color:#ddd; }
</style>

<script>
// ===== Fetch assets from localStorage.sitegenLibrary =====
function getLibraryData(){
  try {
    return JSON.parse(localStorage.getItem("sitegenLibrary") || "[]");
  } catch { return []; }
}

let allAssets = getLibraryData();
// Filter out templates
allAssets = allAssets.filter(item => item.type !== "template");

// Render Sidebar
function renderLibraryAssets(filter=""){
  const container=document.getElementById('libraryContainer');
  container.innerHTML='';

  // Group by type + subcategory
  const categories={};
  allAssets.forEach(item=>{
    const cat=item.type; // asset/page/theme/subscription
    const sub=item.subcategory || "General";
    if(!categories[cat]) categories[cat]={};
    if(!categories[cat][sub]) categories[cat][sub]=[];
    categories[cat][sub].push(item);
  });

  Object.keys(categories).forEach(cat=>{
    const catDiv=document.createElement('div');
    catDiv.className='library-category';
    catDiv.textContent=cat.charAt(0).toUpperCase()+cat.slice(1);
    container.appendChild(catDiv);

    Object.keys(categories[cat]).forEach(sub=>{
      const subDiv=document.createElement('div');
      subDiv.className='library-subcategory';
      subDiv.textContent=sub.charAt(0).toUpperCase()+sub.slice(1);
      container.appendChild(subDiv);

      categories[cat][sub].forEach(item=>{
        if(filter && !item.name.toLowerCase().includes(filter.toLowerCase())) return;

        const div=document.createElement('div');
        div.className='library-item';

        const thumb=document.createElement('div');
        thumb.className='library-thumb';
        if(item.thumbnail){
          const img=document.createElement('img');
          img.src=item.thumbnail;
          thumb.appendChild(img);
        } else {
          const preview=document.createElement('div');
          preview.innerHTML=item.content || "";
          preview.style.transform="scale(0.4)";
          preview.style.transformOrigin="top left";
          preview.style.height="80px";
          preview.style.overflow="hidden";
          thumb.appendChild(preview);
        }

        const title=document.createElement('div');
        title.className='library-title';
        title.innerText=item.name.replace(/[_-]/g," ");

        div.appendChild(thumb);
        div.appendChild(title);

        if(item.type==="page"){
          // full page
          div.addEventListener("click",()=>{
            const filename=item.name.toLowerCase().replace(/\s+/g,'_')+".html";
            pages.push(filename);
            pageContents[filename]=item.content;
            editedContents[filename]=item.content;
            activePage=filename;
            renderTabs();
            renderIframes();
          });
        } else {
          // insert element
          div.addEventListener("click",()=>{
            const iframe=iframeRefs[activePage];
            if(!iframe) return;
            const doc=iframe.contentDocument||iframe.contentWindow.document;
            let insertTarget = doc.activeElement && doc.body.contains(doc.activeElement) ? doc.activeElement : doc.body;
            const temp=document.createElement('div');
            temp.innerHTML=item.content;
            insertTarget.appendChild(temp.firstChild);
            editedContents[activePage]="<!DOCTYPE html>"+doc.documentElement.outerHTML;
          });
          // Drag/drop
          div.draggable=true;
          div.addEventListener('dragstart', e=>{
            e.dataTransfer.setData('text/html', item.content);
            div.classList.add('dragging');
          });
          div.addEventListener('dragend', ()=>div.classList.remove('dragging'));
        }

        container.appendChild(div);
      });
    });
  });
}

// Search
document.getElementById("librarySearch").addEventListener("input",e=>{
  renderLibraryAssets(e.target.value);
});

// Open/close
document.getElementById('openLibraryBtn').onclick=()=>{document.getElementById('librarySidebar').style.display='flex';};
document.getElementById('closeLibraryBtn').onclick=()=>{document.getElementById('librarySidebar').style.display='none';};

// Enable drop inside iframe
function enableDrop(){
  const iframe=iframeRefs[activePage];
  if(!iframe) return;
  const doc=iframe.contentDocument||iframe.contentWindow.document;
  doc.body.addEventListener("dragover", e=>e.preventDefault());
  doc.body.addEventListener("drop", e=>{
    e.preventDefault();
    const html=e.dataTransfer.getData("text/html");
    if(html){
      const temp=document.createElement("div");
      temp.innerHTML=html;
      doc.body.appendChild(temp.firstChild);
      editedContents[activePage]="<!DOCTYPE html>"+doc.documentElement.outerHTML;
    }
  });
}
const originalRenderIframes=renderIframes;
renderIframes=function(){ originalRenderIframes(); enableDrop(); };

// Blank page
document.getElementById('addPageBtnSidebar').onclick=()=>{
  const name=prompt('Enter new page name:');
  if(!name) return;
  const filename=name.replace(/\s+/g,'_').toLowerCase()+'.html';
  const html=`<!DOCTYPE html><html><head><title>${name}</title></head><body><h1>${name}</h1></body></html>`;
  pages.push(filename);
  pageContents[filename]=html;
  editedContents[filename]=html;
  activePage=filename;
  renderTabs();
  renderIframes();
};

// Initial render
renderLibraryAssets();
</script>
<!-- ====================== SGWM THEME ENGINE â€” START ====================== -->
<style>
  /* ðŸŽ¨ Floating palette button just above your âž• assets button */
  #sgwm-theme-toggle {
    position: fixed;
    bottom: 100px; /* adjust if your + button sits elsewhere */
    right: 20px;
    width: 46px; height: 46px; border-radius: 50%;
    background: #fff; border: 2px solid #d0d5dd;
    box-shadow: 0 6px 20px rgba(0,0,0,.15);
    cursor: pointer; z-index: 9999; display: grid; place-items: center;
    font-size: 22px; transition: transform .2s, box-shadow .2s, background .2s;
  }
  #sgwm-theme-toggle:hover { transform: scale(1.06); background:#f7f7f9; box-shadow: 0 8px 26px rgba(0,0,0,.18); }
  #sgwm-theme-panel {
    position: fixed; bottom: 160px; right: 20px; width: 360px; max-height: 520px; overflow: auto;
    background: #fff; border: 1px solid #e5e7eb; border-radius: 14px; box-shadow: 0 18px 50px rgba(0,0,0,.18);
    padding: 12px; z-index: 9999; display: none;
  }
  #sgwm-theme-panel h3 { margin: 6px 4px 10px; font-size: 14px; font-weight: 700; letter-spacing: .02em; text-transform: uppercase; color: #374151; }
  .sgwm-theme-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
  .sgwm-theme-card {
    display: grid; grid-template-rows: 64px auto; border: 1px solid #e5e7eb; border-radius: 12px; overflow: hidden; cursor: pointer;
    transition: transform .18s, box-shadow .18s, border-color .18s; background: #fff;
  }
  .sgwm-theme-card:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,.10); border-color:#cfd3d9; }
  .sgwm-swatches { display: grid; grid-template-columns: 1fr 1fr 1fr; height: 64px; }
  .sgwm-swatch { width: 100%; height: 100%; }
  .sgwm-theme-name { font-size: 13px; font-weight: 600; color:#111827; padding: 8px 10px; border-top: 1px solid #eef2f7; background: #fff; }
</style>

<div id="sgwm-theme-toggle" title="Change Theme">ðŸŽ¨</div>
<div id="sgwm-theme-panel" role="dialog" aria-label="Theme Picker">
  <h3>Choose a Theme</h3>
  <div class="sgwm-theme-grid" id="sgwm-theme-grid"></div>
</div>

<script>
/* ==================== UTIL: PREVIEW & ZIP HOOKS ==================== */

/* Find your preview iframe (tries many selectors, watches DOM, reapplies on load) */
let SGWM_PREVIEW = null;
function sgwmFindPreview() {
  const sels = [
    '#previewFrame', '#sitePreviewFrame', '#editor-preview', '#preview', 'iframe[name="preview"]',
    '.preview iframe', '#canvas iframe', 'iframe[srcdoc]', 'iframe'
  ];
  for (const s of sels) {
    const el = document.querySelector(s);
    if (el) return el;
  }
  return null;
}
function sgwmAttachPreviewObserver() {
  const tryAttach = () => {
    const f = sgwmFindPreview();
    if (f && f !== SGWM_PREVIEW) {
      SGWM_PREVIEW = f;
      SGWM_PREVIEW.addEventListener('load', () => {
        if (window.__SGWM_CURRENT_THEME_CSS) {
          sgwmInjectIntoFrame(SGWM_PREVIEW, window.__SGWM_CURRENT_THEME_CSS); // re-apply on page change
        }
      }, { passive: true });
      if (window.__SGWM_CURRENT_THEME_CSS) sgwmInjectIntoFrame(SGWM_PREVIEW, window.__SGWM_CURRENT_THEME_CSS);
    }
  };
  tryAttach();
  const obs = new MutationObserver(tryAttach);
  obs.observe(document.documentElement, { subtree: true, childList: true });
}
document.addEventListener('DOMContentLoaded', sgwmAttachPreviewObserver);

/* Hook JSZip so we automatically capture the uploaded zip as window.ZIP_REF */
(function sgwmHookZip(){
  try {
    if (window.ZIP_REF) return;
    if (window.JSZip && !window.JSZip.__sgwm_patched) {
      const origStatic = window.JSZip.loadAsync;
      if (typeof origStatic === 'function') {
        window.JSZip.loadAsync = function(...args){
          return origStatic.apply(this, args).then(zip => {
            window.ZIP_REF = zip;
            window.dispatchEvent(new CustomEvent('sgwm:zip-ready', { detail: { zip } }));
            return zip;
          });
        };
      }
      const proto = window.JSZip.prototype || {};
      const origProto = proto.loadAsync;
      if (typeof origProto === 'function') {
        proto.loadAsync = function(...args){
          return origProto.apply(this, args).then(zip => {
            window.ZIP_REF = zip;
            window.dispatchEvent(new CustomEvent('sgwm:zip-ready', { detail: { zip } }));
            return zip;
          });
        };
      }
      window.JSZip.__sgwm_patched = true;
    }
  } catch(e){ console.warn('[SGWM Theme] JSZip hook failed', e); }
})();

/* Optional public API: call this from your uploader once you have the zip */
window.SGWM_THEME = window.SGWM_THEME || {};
window.SGWM_THEME.setZip = function(zip){
  window.ZIP_REF = zip;
  window.dispatchEvent(new CustomEvent('sgwm:zip-ready', { detail: { zip } }));
};

/* ==================== THEME LIBRARY ==================== */

const THEME_BASE_CSS = `
:root{
  --bg:#ffffff;--bg-alt:#f7f7fb;--surface:#ffffff;
  --text:#111827;--muted:#6b7280;
  --primary:#3b82f6;--primary-contrast:#ffffff;
  --accent:#22d3ee;--accent-contrast:#0f172a;
  --border:#e5e7eb;--ring:#93c5fd;--link:#2563eb;--link-hover:#1d4ed8;
  --success:#16a34a;--warning:#f59e0b;--danger:#dc2626;
  --radius:14px;--shadow:0 12px 30px rgba(0,0,0,.12);
}
html,body{background:var(--bg);color:var(--text);}
section,.section{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);}
a{color:var(--link);text-decoration:none;transition:color .2s;}
a:hover{color:var(--link-hover);}
button,.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;
  padding:.65rem 1rem;border-radius:12px;border:1px solid var(--border);
  background:var(--surface);color:var(--text);transition:all .18s;cursor:pointer;}
button:hover,.btn:hover{transform:translateY(-1px);box-shadow:0 10px 18px rgba(0,0,0,.08);}
.btn-primary{background:var(--primary);color:var(--primary-contrast);border-color:transparent;}
.btn-primary:hover{filter:saturate(1.1) brightness(1.02);}
.btn-outline{background:transparent;border-color:var(--primary);color:var(--primary);}
.btn-accent{background:var(--accent);color:var(--accent-contrast);border-color:transparent;}
.card{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:18px;box-shadow:var(--shadow);}
.card .card-title{font-size:1.125rem;font-weight:700;margin-bottom:.35rem;}
.card .card-sub{color:var(--muted);font-size:.9rem;margin-bottom:.75rem;}
.navbar, header{background:linear-gradient(180deg, var(--surface), var(--bg-alt));
  border-bottom:1px solid var(--border);padding:14px 18px;border-radius:0 0 18px 18px;}
.navbar .nav-link{color:var(--text);padding:8px 12px;border-radius:10px;}
.navbar .nav-link.active,.navbar .nav-link:hover{background:var(--bg-alt);}
footer{background:var(--bg-alt);border-top:1px solid var(--border);padding:20px;border-radius:18px 18px 0 0;}
.badge{display:inline-block;padding:.25rem .5rem;border-radius:999px;border:1px solid var(--border);color:var(--text);background:var(--surface);}
.badge.success{border-color:var(--success);color:var(--success);}
.badge.warning{border-color:var(--warning);color:var(--warning);}
.badge.danger{border-color:var(--danger);color:var(--danger);}
input,textarea,select{background:var(--surface);color:var(--text);border:1px solid var(--border);
  border-radius:12px;padding:.6rem .75rem;outline:none;transition:border .18s, box-shadow .18s;}
input:focus,textarea:focus,select:focus{border-color:var(--link);box-shadow:0 0 0 3px var(--ring);}
.hero{border-radius:22px;padding:38px 28px;margin:12px 0;background:linear-gradient(135deg, var(--primary), var(--accent));color:var(--primary-contrast);}
.hero .btn{filter:drop-shadow(0 10px 24px rgba(0,0,0,.18));}
*{transition:background-color .18s, color .18s, border-color .18s;}
`;

const THEMES = [
  {name:"Corporate Blue", vars:{ "--bg":"#ffffff","--bg-alt":"#f3f6fb","--surface":"#ffffff","--text":"#0f172a","--muted":"#6b7280","--primary":"#0b5ed7","--primary-contrast":"#ffffff","--accent":"#60a5fa","--accent-contrast":"#0f172a","--border":"#e5e7eb","--ring":"#bfdbfe","--link":"#0b5ed7","--link-hover":"#0a58ca" }, extras:".navbar{background:linear-gradient(180deg,#ffffff,#e9f1ff);} .hero{background:linear-gradient(135deg,#0b5ed7,#60a5fa);}"},
  {name:"Luxury Black & Gold", vars:{ "--bg":"#0a0a0a","--bg-alt":"#111111","--surface":"#0f0f0f","--text":"#f5f5f5","--muted":"#bdbdbd","--primary":"#c8a848","--primary-contrast":"#161616","--accent":"#f0d679","--accent-contrast":"#161616","--border":"#2a2a2a","--ring":"#e6d69a","--link":"#d6b451","--link-hover":"#edc864" }, extras:".navbar,header{background:linear-gradient(180deg,#0f0f0f,#151515);} .hero{background:linear-gradient(135deg,#c8a848,#f0d679);color:#161616;}"},
  {name:"Ocean Breeze", vars:{ "--bg":"#e6f7fb","--bg-alt":"#def1f6","--surface":"#ffffff","--text":"#033d4e","--muted":"#4a7080","--primary":"#0096b6","--primary-contrast":"#ffffff","--accent":"#47c5e0","--accent-contrast":"#083344","--border":"#cbe7ef","--ring":"#b9ecff","--link":"#007c99","--link-hover":"#006a84" }, extras:".hero{background:linear-gradient(135deg,#0096b6,#47c5e0);}"},
  {name:"Minimal Snow", vars:{ "--bg":"#ffffff","--bg-alt":"#f7f7f7","--surface":"#ffffff","--text":"#18181b","--muted":"#6b7280","--primary":"#111827","--primary-contrast":"#ffffff","--accent":"#9ca3af","--accent-contrast":"#111827","--border":"#e5e7eb","--ring":"#e5e7eb","--link":"#111827","--link-hover":"#0b1220" }, extras:".navbar .nav-link:hover{background:#efefef;} .hero{background:linear-gradient(135deg,#111827,#6b7280);}"},
  {name:"Sunset Coral", vars:{ "--bg":"#fff6ef","--bg-alt":"#ffe7d7","--surface":"#ffffff","--text":"#5a382d","--muted":"#8d6e63","--primary":"#ff6a3d","--primary-contrast":"#ffffff","--accent":"#ffb199","--accent-contrast":"#4e342e","--border":"#ffd8c6","--ring":"#ffd0c4","--link":"#ff6a3d","--link-hover":"#ff4f1b" }, extras:".hero{background:linear-gradient(135deg,#ff6a3d,#ffb199);}"},
  {name:"Royal Purple", vars:{ "--bg":"#f7f3ff","--bg-alt":"#efe8ff","--surface":"#ffffff","--text":"#2c1a6b","--muted":"#6c5aa6","--primary":"#6b46c1","--primary-contrast":"#ffffff","--accent":"#b794f4","--accent-contrast":"#1b103e","--border":"#e9defe","--ring":"#d8c8ff","--link":"#6b46c1","--link-hover":"#5a3aad" }, extras:".hero{background:linear-gradient(135deg,#6b46c1,#b794f4);}"},
  {name:"Dark Neon", vars:{ "--bg":"#111114","--bg-alt":"#18181c","--surface":"#141419","--text":"#e9eef6","--muted":"#a0a3ad","--primary":"#00eaff","--primary-contrast":"#071018","--accent":"#ff3bf0","--accent-contrast":"#100414","--border":"#24262b","--ring":"#00eaff55","--link":"#31d7ff","--link-hover":"#14c6ff" }, extras:".navbar{background:linear-gradient(180deg,#141419,#18181c);} .hero{background:linear-gradient(135deg,#00eaff,#ff3bf0);}"},
  {name:"Pastel Candy", vars:{ "--bg":"#fff7fb","--bg-alt":"#fbeeff","--surface":"#ffffff","--text":"#2f2f33","--muted":"#6d6d73","--primary":"#f48fb1","--primary-contrast":"#2b1a22","--accent":"#81d4fa","--accent-contrast":"#12202a","--border":"#f4dced","--ring":"#ffd7e7","--link":"#ec407a","--link-hover":"#d81b60" }, extras:".hero{background:linear-gradient(135deg,#f48fb1,#81d4fa);}"},
  {name:"Vintage Sepia", vars:{ "--bg":"#fbf5ea","--bg-alt":"#f3e6d3","--surface":"#ffffff","--text":"#3e2d23","--muted":"#7b6458","--primary":"#8d6e63","--primary-contrast":"#ffffff","--accent":"#d7ccc8","--accent-contrast":"#3e2723","--border":"#e5d8c8","--ring":"#e5d8c8","--link":"#6d4c41","--link-hover":"#5d4037" }, extras:".hero{background:linear-gradient(135deg,#8d6e63,#d7ccc8);}"},
  {name:"Elegant Navy", vars:{ "--bg":"#f7f8fc","--bg-alt":"#ebeffb","--surface":"#ffffff","--text":"#1a237e","--muted":"#5c6bc0","--primary":"#283593","--primary-contrast":"#ffffff","--accent":"#9fa8da","--accent-contrast":"#111827","--border":"#e2e8ff","--ring":"#c7d2fe","--link":"#283593","--link-hover":"#1e2d7a" }, extras:".hero{background:linear-gradient(135deg,#283593,#9fa8da);}"},
  {name:"Energetic Orange", vars:{ "--bg":"#fff9f3","--bg-alt":"#ffe7d2","--surface":"#ffffff","--text":"#262626","--muted":"#8a6a55","--primary":"#ff6a1a","--primary-contrast":"#fffaf5","--accent":"#ff9f59","--accent-contrast":"#3a1e0b","--border":"#ffd2b1","--ring":"#ffd6bf","--link":"#ff6a1a","--link-hover":"#e85a0a" }, extras:".hero{background:linear-gradient(135deg,#ff6a1a,#ff9f59);}"},
  {name:"Cyberpunk", vars:{ "--bg":"#0d0d12","--bg-alt":"#101017","--surface":"#12121a","--text":"#f0f2ff","--muted":"#b6b9c7","--primary":"#ff00ff","--primary-contrast":"#17001a","--accent":"#00ffff","--accent-contrast":"#001a1a","--border":"#222331","--ring":"#a600ff55","--link":"#ff55ff","--link-hover":"#ff22ff" }, extras:".hero{background:linear-gradient(135deg,#ff00ff,#00ffff);}"},
  {name:"Gradient Sunrise", vars:{ "--bg":"#fff5f7","--bg-alt":"#ffe9ee","--surface":"#ffffff","--text":"#2f1d2a","--muted":"#7a5a67","--primary":"#ff7a69","--primary-contrast":"#2a0e10","--accent":"#ffd08a","--accent-contrast":"#33220e","--border":"#ffd7de","--ring":"#ffdbe4","--link":"#ff6b6b","--link-hover":"#ff4d4d" }, extras:".hero{background:linear-gradient(135deg,#ff7a69,#ffd08a);}"},
  {name:"Fresh Mint", vars:{ "--bg":"#f2fffb","--bg-alt":"#e1fbf3","--surface":"#ffffff","--text":"#083b34","--muted":"#3f7b72","--primary":"#17c3b2","--primary-contrast":"#042724","--accent":"#7ae3d7","--accent-contrast":"#083b34","--border":"#ccefe7","--ring":"#b8f1e9","--link":"#17c3b2","--link-hover":"#11a99a" }, extras:".hero{background:linear-gradient(135deg,#17c3b2,#7ae3d7);}"},
  {name:"Bold Red", vars:{ "--bg":"#ffffff","--bg-alt":"#fff1f1","--surface":"#ffffff","--text":"#1f2937","--muted":"#6b7280","--primary":"#e11d48","--primary-contrast":"#ffffff","--accent":"#fb7185","--accent-contrast":"#3b0a14","--border":"#fecdd3","--ring":"#fecaca","--link":"#e11d48","--link-hover":"#be123c" }, extras:".hero{background:linear-gradient(135deg,#e11d48,#fb7185);}"},
  {name:"Newspaper Classic", vars:{ "--bg":"#f7f7f7","--bg-alt":"#efefef","--surface":"#ffffff","--text":"#121212","--muted":"#4b5563","--primary":"#111111","--primary-contrast":"#ffffff","--accent":"#6b7280","--accent-contrast":"#ffffff","--border":"#d1d5db","--ring":"#d1d5db","--link":"#111111","--link-hover":"#000000" }, extras:".hero{background:linear-gradient(135deg,#111111,#6b7280);}"},
  {name:"Modern Teal", vars:{ "--bg":"#f7fffe","--bg-alt":"#e6fffb","--surface":"#ffffff","--text":"#0e2a2b","--muted":"#557a7b","--primary":"#0891b2","--primary-contrast":"#ffffff","--accent":"#5eead4","--accent-contrast":"#05201f","--border":"#cdecec","--ring":"#a7f3d0","--link":"#0e7490","--link-hover":"#155e75" }, extras:".hero{background:linear-gradient(135deg,#0891b2,#5eead4);}"},
  {name:"Fashion Magenta", vars:{ "--bg":"#ffffff","--bg-alt":"#fff0f7","--surface":"#ffffff","--text":"#1a1220","--muted":"#6d516c","--primary":"#d946ef","--primary-contrast":"#2a0a2e","--accent":"#f0abfc","--accent-contrast":"#2a0a2e","--border":"#f3d7fb","--ring":"#f5d0fe","--link":"#c026d3","--link-hover":"#a21caf" }, extras:".hero{background:linear-gradient(135deg,#d946ef,#f0abfc);}"},
  {name:"Golden Sunrise", vars:{ "--bg":"#fffceb","--bg-alt":"#fff3c7","--surface":"#ffffff","--text":"#4b2e07","--muted":"#7c5d26","--primary":"#f59e0b","--primary-contrast":"#231a09","--accent":"#fde68a","--accent-contrast":"#3a2c0f","--border":"#fde9b5","--ring":"#fde68a","--link":"#d97706","--link-hover":"#b45309" }, extras:".hero{background:linear-gradient(135deg,#f59e0b,#fde68a);}"},
  {name:"Arctic Frost", vars:{ "--bg":"#f3faff","--bg-alt":"#e8f4ff","--surface":"#ffffff","--text":"#0b2a3b","--muted":"#4b6a7f","--primary":"#0284c7","--primary-contrast":"#ffffff","--accent":"#7dd3fc","--accent-contrast":"#062332","--border":"#cfe8fb","--ring":"#bae6fd","--link":"#0ea5e9","--link-hover":"#0284c7" }, extras:".hero{background:linear-gradient(135deg,#0284c7,#7dd3fc);}"},
  {name:"Slate & Lime", vars:{ "--bg":"#0b1220","--bg-alt":"#0f172a","--surface":"#0f172a","--text":"#e5f2ff","--muted":"#9fb5cc","--primary":"#84cc16","--primary-contrast":"#0b1220","--accent":"#a3e635","--accent-contrast":"#0b1220","--border":"#1e293b","--ring":"#a3e63555","--link":"#bef264","--link-hover":"#a3e635" }, extras:".hero{background:linear-gradient(135deg,#84cc16,#22c55e);}"},
  {name:"Rosewood", vars:{ "--bg":"#fcf2f2","--bg-alt":"#fde6e6","--surface":"#ffffff","--text":"#2a0f12","--muted":"#805157","--primary":"#b91c1c","--primary-contrast":"#fff5f5","--accent":"#fda4af","--accent-contrast":"#2a0f12","--border":"#f7c7cf","--ring":"#fecdd3","--link":"#991b1b","--link-hover":"#7f1d1d" }, extras:".hero{background:linear-gradient(135deg,#b91c1c,#fda4af);}"},
  {name:"Jade Noir", vars:{ "--bg":"#0b1716","--bg-alt":"#0f201e","--surface":"#0f201e","--text":"#e6fffb","--muted":"#9ee3d8","--primary":"#10b981","--primary-contrast":"#031a14","--accent":"#34d399","--accent-contrast":"#042317","--border":"#1a2f2c","--ring":"#34d39955","--link":"#6ee7b7","--link-hover":"#34d399" }, extras:".hero{background:linear-gradient(135deg,#10b981,#34d399);}"},
];

/* Build CSS string for a theme */
function sgwmBuildCSS(theme){
  const varLines = Object.entries(theme.vars).map(([k,v])=>`${k}:${v}`).join(';');
  return `:root{${varLines}}` + THEME_BASE_CSS + (theme.extras || "");
}

/* ==================== UI RENDER ==================== */
const grid = document.getElementById('sgwm-theme-grid');
THEMES.forEach((t, idx) => {
  const card = document.createElement('div');
  card.className = 'sgwm-theme-card';
  const s1 = t.vars["--primary"] || "#ccc";
  const s2 = t.vars["--accent"]  || "#ddd";
  const s3 = t.vars["--bg-alt"]  || "#eee";
  card.innerHTML = `
    <div class="sgwm-swatches">
      <div class="sgwm-swatch" style="background:${s1}"></div>
      <div class="sgwm-swatch" style="background:${s2}"></div>
      <div class="sgwm-swatch" style="background:${s3}"></div>
    </div>
    <div class="sgwm-theme-name">${idx+1}. ${t.name}</div>
  `;
  card.addEventListener('click', () => sgwmApplyTheme(t));
  grid.appendChild(card);
});
document.getElementById('sgwm-theme-toggle').addEventListener('click', () => {
  const p = document.getElementById('sgwm-theme-panel');
  p.style.display = (p.style.display === 'block') ? 'none' : 'block';
});

/* ==================== APPLY: LIVE + ZIP ==================== */
async function sgwmApplyTheme(themeObj){
  const css = sgwmBuildCSS(themeObj);
  window.__SGWM_CURRENT_THEME_CSS = css;

  // 1) Live preview (no 404s): inject <style> + blob <link> inside the iframe
  if (!SGWM_PREVIEW) SGWM_PREVIEW = sgwmFindPreview();
  if (SGWM_PREVIEW) {
    sgwmInjectIntoFrame(SGWM_PREVIEW, css);
  } else {
    console.warn('[SGWM Theme] preview iframe not found â€” live preview skipped.');
  }

  // 2) Persist into ZIP: write theme.css and link it from ALL pages with correct relative path
  if (!window.ZIP_REF) {
    console.warn('[SGWM Theme] window.ZIP_REF not found â€” ensure your uploader calls JSZip.loadAsync or SGWM_THEME.setZip(zip).');
    return;
  }
  window.ZIP_REF.file('theme.css', css);
  const ops = [];
  window.ZIP_REF.forEach((path, file) => {
    if (path.toLowerCase().endsWith('.html')) {
      ops.push(
        file.async('string').then(content => {
          const relHref = sgwmRelativeToRoot(path, 'theme.css');
          let out = content;
          if (!/theme\.css/i.test(out)) {
            out = sgwmInsertThemeLink(out, relHref);
          } else {
            out = sgwmNormalizeExistingThemeLink(out, relHref);
          }
          window.ZIP_REF.file(path, out);
        })
      );
    }
  });
  await Promise.all(ops);
  console.info('[SGWM Theme] theme.css written and linked in all HTML files.');
}

/* ===== Helpers for live preview injection ===== */
function sgwmInjectIntoFrame(frame, css){
  const doc = frame.contentDocument || frame.contentWindow?.document;
  if (!doc) return;
  // Immediate style
  let styleEl = doc.getElementById('sgwm-theme-style');
  if (!styleEl) { styleEl = doc.createElement('style'); styleEl.id = 'sgwm-theme-style'; doc.head.appendChild(styleEl); }
  styleEl.textContent = css;

  // Blob link so any <link href="theme.css"> inside the page wonâ€™t 404 in memory previews
  const blob = new Blob([css], {type:'text/css'});
  const url  = URL.createObjectURL(blob);
  let linkEl = doc.getElementById('sgwm-theme-link');
  if (!linkEl) { linkEl = doc.createElement('link'); linkEl.id='sgwm-theme-link'; linkEl.rel='stylesheet'; doc.head.appendChild(linkEl); }
  linkEl.href = url;
}

/* ===== Helpers for ZIP HTML link injection ===== */
function sgwmInsertThemeLink(html, relHref){
  const tag = `<link rel="stylesheet" href="${relHref}?v=${Date.now()}">`;
  if (/<\/head>/i.test(html)) return html.replace(/<\/head>/i, `${tag}\n</head>`);
  return `${tag}\n${html}`;
}
function sgwmNormalizeExistingThemeLink(html, relHref){
  return html.replace(
    /<link([^>]*?)href=(['"])([^'"]*theme\.css[^'"]*)\2([^>]*)>/ig,
    (_m, pre, q, _old, post) => `<link${pre}href=${q}${relHref}?v=${Date.now()}${q}${post}>`
  );
}
function sgwmRelativeToRoot(pagePath, fileAtRoot){
  if (!pagePath.includes('/')) return fileAtRoot;
  const depth = pagePath.split('/').length - 1;
  const up = Array(depth).fill('..').join('/');
  return `${up}/${fileAtRoot}`;
}
</script>
<!-- ======================= SGWM THEME ENGINE â€” END ======================= -->


</body>
</html>
