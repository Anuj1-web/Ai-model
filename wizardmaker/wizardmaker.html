<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Wizard Maker â€” Button Fix (v11 UI + Placeholder)</title>

  <!-- Styles -->
  <link rel="stylesheet" href="css/wizard.css">

  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
</head>
<body>
  <div class="card">
    <h1>Wizard Maker â€” Button Fix (v11)</h1>
    <p>Upload EduPro (multi-page). Double-click or double-tap buttons/links/inputs to edit. Cancel fully restores. Fonts untouched.</p>

    <div class="topbar">
      <input type="file" id="zipInput" accept=".zip">
      <button id="exportBtn">â¬‡ Export ZIP</button>
    </div>

    <div class="tabs" id="tabs"></div>
    <div id="iframeContainer"></div>
  </div>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" style="display:none;">
    <div class="modal">
      <h2>Edit Element</h2>
      <div id="textSection" class="mb-4">
        <label class="mb-2">Text / Placeholder</label>
        <input id="modalText">
      </div>
      <div class="mb-3">
        <label class="mb-2">Color Mode</label>
        <select id="colorTarget">
          <option value="auto">Auto</option>
          <option value="text">Text Color</option>
          <option value="background">Background</option>
        </select>
      </div>
      <div class="mb-4">
        <label class="mb-2">Color Picker</label>
        <input type="color" id="modalColor" style="width:70px;">
      </div>
      <div class="mb-4">
        <label class="mb-2">Replace Image</label>
        <input type="url" id="imageUrl" placeholder="Image URL">
        <input type="file" id="imageFile" accept="image/*">
      </div>
      <div class="actions">
        <button id="cancelBtn">Cancel</button>
        <button id="saveBtn">Save</button>
      </div>
    </div>
  </div>

  <!-- Floating black + button -->
  <button id="openLibraryBtn" style="
    position: fixed; bottom: 20px; right: 20px;
    width: 50px; height: 50px; border-radius: 50%;
    background: #111; color: #fff; font-size: 2rem;
    border: none; cursor: pointer; z-index: 2000;">+</button>

  <!-- Sidebar -->
  <div id="librarySidebar" style="display:none;">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
      <h3 style="margin:0;color:#fff;">Library Assets</h3>
      <button id="closeLibraryBtn" style="background:none;color:#fff;font-size:1.2rem;border:none;cursor:pointer;">âœ–</button>
    </div>

    <!-- Search -->
    <input type="text" id="librarySearch" placeholder="Search..."
           style="width:100%;padding:0.3rem;margin-bottom:0.5rem;border-radius:0.25rem;border:none;background:#333;color:#fff;">

    <!-- Container -->
    <div id="libraryContainer" style="overflow-y:auto; flex:1;"></div>

    <hr style="border-color:#444;margin:0.5rem 0;">

    <button id="addPageBtnSidebar"
            style="padding:0.4rem;background:#222;color:#fff;border:none;border-radius:0.25rem;cursor:pointer;">
      + Add Blank Page
    </button>
  </div>

  <!-- Color pad button -->
  <button id="open-theme-tool" style="position:fixed;right:20px;bottom:20px;z-index:2147480000;border:none;background:#111;color:#fff;padding:10px;border-radius:10px;cursor:pointer;">
    ðŸŽ¨
  </button>

  <!-- Theme tool iframe (hidden by default) -->
  <iframe id="sgwm-theme-frame" src="theme.html" style="position:fixed;inset:0;width:100%;height:100%;border:none;display:none;z-index:2147480000;background:transparent;"></iframe>

  <!-- Core Scripts -->
  <script src="js/core.js"></script>
  <script src="js/editor.js"></script>
  <script src="js/library.js"></script>
  <script src="js/theme.js"></script>
<!-- Library Preview Modal -->
<div id="libraryPreviewModal" class="modal-backdrop" style="display:none;">
  <div class="modal">
    <h2>Preview Library Item</h2>
    <div id="libraryPreviewContent" style="max-height:300px;overflow:auto;background:#f9f9f9;padding:1rem;border-radius:0.5rem;">
      <!-- Live preview will be injected here -->
    </div>
    <div class="actions" style="margin-top:1rem;">
      <button id="cancelLibraryPreview">Cancel</button>
      <button id="insertLibraryPreview">Insert</button>
    </div>
  </div>
</div>

</body>
</html>
